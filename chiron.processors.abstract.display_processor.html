

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>chiron.processors.abstract.display_processor module &mdash; Chiron 1.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> Chiron
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="system_overview.html">System Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="demo.html">Demo Version</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Installing Chiron</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_dict_example.html">Data Dictionary Setup Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="built_in_processors.html">Built-In Processors</a></li>
<li class="toctree-l1"><a class="reference internal" href="making_custom_processor.html">Creating Your Own Processors</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_dict_models.html">Data Dictionary Model Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_viewsets.html">API Endpoints</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_transforming_cohort_def.html">Transforming Cohort Definitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_transforming_table_def.html">Transforming Table Definitions</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Chiron</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>chiron.processors.abstract.display_processor module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/chiron.processors.abstract.display_processor.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-chiron.processors.abstract.display_processor">
<span id="chiron-processors-abstract-display-processor-module"></span><h1>chiron.processors.abstract.display_processor module<a class="headerlink" href="#module-chiron.processors.abstract.display_processor" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt id="chiron.processors.abstract.display_processor.DisplayProcessor">
<em class="property">class </em><code class="sig-prename descclassname">chiron.processors.abstract.display_processor.</code><code class="sig-name descname">DisplayProcessor</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">oUser</span></em>, <em class="sig-param"><span class="n">oConcept</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.display_processor.DisplayProcessor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Manages how a concept is incorporated into output datasets. It is associated with a concept in
the data dictionary using the <code class="docutils literal notranslate"><span class="pre">Concept.display_processor</span></code> field.</p>
<p>IMPORTANT METHOD WORKFLOWS:</p>
<p>Creating a Table Def Entry:</p>
<ul class="simple">
<li><p>set_aggregation_method() - sets a list of aggregation objects that can be applied to this
concept</p></li>
<li><p>get_form_options() - data needed to display a table def entry form</p></li>
<li><p>validate_form() - checks if a form submission is valid</p></li>
<li><p>generate_table_def_entry() - converts form submission into a dict to be added to cohort def</p></li>
</ul>
<p>Applying a Table Def Entry to a Results Set:</p>
<ul class="simple">
<li><p>get_mongo_aggregate_def() - tell mongo how to aggregate this concept</p></li>
<li><p>get_sort_field() - tell mongo how to sort this concept</p></li>
<li><p>get_header_display_value() - the label for this column in the results output</p></li>
<li><p>get_individual_display_value() - how to convert the stored concept value into a string</p></li>
<li><p>get_display_value() - how to convert the mongo output value into a string</p></li>
</ul>
<dl class="py method">
<dt id="chiron.processors.abstract.display_processor.DisplayProcessor.set_aggregation_methods">
<code class="sig-name descname">set_aggregation_methods</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.display_processor.DisplayProcessor.set_aggregation_methods" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets a list of AggregationMethod objects that can be applied to this concept. This is
automatically called by the init method.</p>
</dd></dl>

<dl class="py method">
<dt id="chiron.processors.abstract.display_processor.DisplayProcessor.get_form_options">
<code class="sig-name descname">get_form_options</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">table_def</span></em>, <em class="sig-param"><span class="n">existing_td_entry</span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.display_processor.DisplayProcessor.get_form_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of options for customizing a table_def_entry</p>
</dd></dl>

<dl class="py method">
<dt id="chiron.processors.abstract.display_processor.DisplayProcessor.validate_form">
<code class="sig-name descname">validate_form</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">form_data</span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.display_processor.DisplayProcessor.validate_form" title="Permalink to this definition">¶</a></dt>
<dd><p>If provided form validates, returns True and populates self.cleaned dict with any data
needed to generate a table def entry. If validation fails, returns False and adds
error message strings to self.errors list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>form_data</strong> (<em>dict</em>) – the HTTP POST arguments from the client</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>whether form validated</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>boolean</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="chiron.processors.abstract.display_processor.DisplayProcessor.generate_table_def_entry">
<code class="sig-name descname">generate_table_def_entry</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.display_processor.DisplayProcessor.generate_table_def_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the table_def entry definition for this column
NOTE: This should typically be run after validate_table_form has successfully run.
Otherwise, it will just generate a default entry with no customization.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the table def entry</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="chiron.processors.abstract.display_processor.DisplayProcessor.get_mongo_aggregate_def">
<code class="sig-name descname">get_mongo_aggregate_def</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">td_entry</span></em>, <em class="sig-param"><span class="n">field_temp_name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.display_processor.DisplayProcessor.get_mongo_aggregate_def" title="Permalink to this definition">¶</a></dt>
<dd><p>For aggregated fields, returns the $group rule and the $project rule
that will handle the aggregation.</p>
</dd></dl>

<dl class="py method">
<dt id="chiron.processors.abstract.display_processor.DisplayProcessor.check_mongo_output_is_array">
<code class="sig-name descname">check_mongo_output_is_array</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">td_entry</span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.display_processor.DisplayProcessor.check_mongo_output_is_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Some aggregate methods (such as list) will return an array for that value from the
MongoDB query. MongoDB will throw an error if you try to sort by more than 1 array field,
simply because it causes performance issues.</p>
<p>Returns True if array output for this field, else False. This methods primary use is to
make sure the user doesn’t create an invalid sort def.</p>
</dd></dl>

<dl class="py method">
<dt id="chiron.processors.abstract.display_processor.DisplayProcessor.get_sort_field">
<code class="sig-name descname">get_sort_field</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">table_def</span></em>, <em class="sig-param"><span class="n">entry_id</span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.display_processor.DisplayProcessor.get_sort_field" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the mongo field name to use for sorting by this concept. Often that will simply be
the concept permanent ID itself, but could be different for more complex data structures.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>mongo field name</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="chiron.processors.abstract.display_processor.DisplayProcessor.get_header_display_value">
<code class="sig-name descname">get_header_display_value</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">td_entry</span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.display_processor.DisplayProcessor.get_header_display_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a display name for the column</p>
</dd></dl>

<dl class="py method">
<dt id="chiron.processors.abstract.display_processor.DisplayProcessor.get_individual_display_value">
<code class="sig-name descname">get_individual_display_value</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">output_type</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.display_processor.DisplayProcessor.get_individual_display_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a value stored in the Mongo database to a display value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> (<em>various</em>) – the raw value coming from the Mongo database for this concept</p></li>
<li><p><strong>output_type</strong> (<em>str</em><em>, </em><em>optional</em>) – the type of output being generated (html, csv, etc.)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a displayable representation of the value</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="chiron.processors.abstract.display_processor.DisplayProcessor.get_display_value">
<code class="sig-name descname">get_display_value</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">td_entry</span></em>, <em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">output_type</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.display_processor.DisplayProcessor.get_display_value" title="Permalink to this definition">¶</a></dt>
<dd><p>The get_individual_display_value() method converts a single value from the
Mongo database into the final display value. However, with aggregate
queries the type of value coming out of the query might be different from the type of
value stored in the database. For example, a count aggregate will return a
number regardless of the concept data type. A list aggregate must get multiple values
and merge them into a single string. This method looks at the aggregation rules and
returns the appropriate final value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>td_entry</strong> (<em>dict</em>) – the table def entry for this field</p></li>
<li><p><strong>value</strong> (<em>various</em>) – the raw value coming from the Mongo database for this concept</p></li>
<li><p><strong>output_type</strong> (<em>str</em><em>, </em><em>optional</em>) – the type of output being generated (html, csv, etc.)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a displayable representation of the value or aggregate value</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="chiron.processors.abstract.display_processor.DisplayProcessor.get_data_type">
<code class="sig-name descname">get_data_type</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.display_processor.DisplayProcessor.get_data_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a human-readable string describing the data type (text, integer, etc.).
This is used to generate a data dictionary.</p>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, UC Center for Health Informatics, Cincinnati Children&#39;s Biomedical Informatics

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>