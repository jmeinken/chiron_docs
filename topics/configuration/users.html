<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Users and User Permissions &mdash; Chiron 4.3.0 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
        <script>mermaid.initialize({startOnLoad:true});</script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Data Dictionary" href="data_dict_models.html" />
    <link rel="prev" title="Chiron Global Settings" href="chiron_settings.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> Chiron
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../system_overview.html">System Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data_dict.html">Understanding the Data Dictionary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflow.html">Site Deployment Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utilities.html">Site Admin Utilities</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../configuration.html">Chiron Configuration</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="chiron_settings.html">Chiron Global Settings</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Users and User Permissions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#access-levels">Access Levels</a></li>
<li class="toctree-l3"><a class="reference internal" href="#permission-groups">Permission Groups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-access-levels-work-with-permission-groups">How do access levels work with permission groups?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#default-permissions-for-autocreated-users">Default Permissions for AutoCreated Users</a></li>
<li class="toctree-l3"><a class="reference internal" href="#user-permissions-with-multiple-datasets">User Permissions With Multiple Datasets</a></li>
<li class="toctree-l3"><a class="reference internal" href="#chironuser-model">ChironUser Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="#permissiongroup-model">PermissionGroup Model</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="data_dict_models.html">Data Dictionary</a></li>
<li class="toctree-l2"><a class="reference internal" href="built_in_processors.html">Built-In Processors</a></li>
<li class="toctree-l2"><a class="reference internal" href="built_in_concept_handlers.html">Built-In Concept Handlers</a></li>
<li class="toctree-l2"><a class="reference internal" href="making_custom_processor.html">Custom Processors and Concept Handlers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">Chiron API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../version_changelog.html">Version Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Chiron</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../configuration.html">Chiron Configuration</a> &raquo;</li>
      <li>Users and User Permissions</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/topics/configuration/users.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="users-and-user-permissions">
<h1>Users and User Permissions<a class="headerlink" href="#users-and-user-permissions" title="Permalink to this headline"></a></h1>
<p>There are two systems for managing a user's access to data: access levels and permission groups.</p>
<section id="access-levels">
<h2>Access Levels<a class="headerlink" href="#access-levels" title="Permalink to this headline"></a></h2>
<p>Access levels control the type of data a user is allowed to see. Each Chiron user has one of three access levels:</p>
<ul class="simple">
<li><p><strong>phi</strong> - Users will be able to see patient-level data, including concepts that are flagged as PHI.</p></li>
<li><p><strong>deid</strong> - Users will be able to see patient-level data, but will not have access to PHI.</p></li>
<li><p><strong>agg</strong> - Users can only see aggregated data. They do not have access to PHI and do not have access to patient-level values.</p></li>
</ul>
<p><strong>Settings relevant to PHI access</strong></p>
<ul class="simple">
<li><p>Concepts containing PHI should have the has_phi flag set to True.</p></li>
<li><p>Additionally, flagged concepts can set values for cohort_def_processor_deid_alt and display_processor_deid_alt. These can be set to special processor classes that allow the user to interact with the concept without seeing PHI. If these flags aren't set, the concept will be hidden from the user.</p></li>
</ul>
<p><strong>Settings relevant to aggregated access</strong></p>
<ul class="simple">
<li><p>Concepts that shouldn't be shown in aggregated view should have the exclude_from_aggregated flag set to True. For example, you might want to hide a text field containing detailed comments specific to a patient.</p></li>
<li><p>django setting CHIRON_AGG_SUBJECT_COUNT_MIN_LIMIT gives the minimum patient count that should be given. For example, if set to the default of 5, any patient counts less than 5 will show as &quot;&lt;5&quot; rather than the actual number.</p></li>
</ul>
</section>
<section id="permission-groups">
<h2>Permission Groups<a class="headerlink" href="#permission-groups" title="Permalink to this headline"></a></h2>
<p>Permission groups limit users' access to specific groups of subjects or specific groups of concepts. This is useful, for example, if you have data coming from multiple different studies and want to limit some users' access to only data from specific studies.</p>
<p>If you don't need permission groups on your project, simply leave the PermissionGroups table empty.</p>
<p>Once you have any permission groups defined, every user must belong to at least one permission group or they won't be able to see any data. If a user belongs to multiple permission groups, their access level will be the union of all the groups. In other words, they will be able to see a subject or concept if at least one of their permission groups grants them access.</p>
</section>
<section id="how-do-access-levels-work-with-permission-groups">
<h2>How do access levels work with permission groups?<a class="headerlink" href="#how-do-access-levels-work-with-permission-groups" title="Permalink to this headline"></a></h2>
<p>Both access levels and permission groups restrict access to concepts. If a concept is blocked by either system, the user will not be able to see it.</p>
</section>
<section id="default-permissions-for-autocreated-users">
<h2>Default Permissions for AutoCreated Users<a class="headerlink" href="#default-permissions-for-autocreated-users" title="Permalink to this headline"></a></h2>
<p>a Chiron user will be autocreated if <cite>Dataset.autocreate_chiron_user=True</cite>. The permission levels for autocreated users will be controlled by these fields:</p>
<ul class="simple">
<li><p>Dataset.auto_access_level</p></li>
<li><p>Dataset.auto_can_view_workspace</p></li>
<li><p>Dataset.auto_can_view_subject_details</p></li>
<li><p>In the DefaultPermissionGroup model, any permission groups associated with this Dataset.</p></li>
</ul>
</section>
<section id="user-permissions-with-multiple-datasets">
<h2>User Permissions With Multiple Datasets<a class="headerlink" href="#user-permissions-with-multiple-datasets" title="Permalink to this headline"></a></h2>
<p>A Django User will have a separate ChironUser entry for each dataset they need to access. So their permissions can be different for each dataset.</p>
</section>
<section id="chironuser-model">
<h2>ChironUser Model<a class="headerlink" href="#chironuser-model" title="Permalink to this headline"></a></h2>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">chiron.models.</span></span><span class="sig-name descname"><span class="pre">ChironUser</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Defines access for a Django user to a single Chiron dataset.</p>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">AccessLevel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>An enumeration.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">dataset</span></span></dt>
<dd><p>The associated dataset. Each ChironUser defines permissions for one Django user on one 
dataset.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">user</span></span></dt>
<dd><p>The associated Django user. This is a 1:1 relationship if there is only 1 dataset,
otherwise a Django user can have a different ChironUser for each dataset.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">access_level</span></span></dt>
<dd><p>The access level granted to the user</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">can_view_workspace</span></span></dt>
<dd><p>If False, user cannot see query or results views and cannot define cohorts or
reports</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">can_view_subject_details</span></span></dt>
<dd><p>If False, user will not be able to see the subject details section in the built-in UI</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">permission_groups</span></span></dt>
<dd><p>The list of permission groups this user belongs to</p>
</dd></dl>

</dd></dl>

</section>
<section id="permissiongroup-model">
<h2>PermissionGroup Model<a class="headerlink" href="#permissiongroup-model" title="Permalink to this headline"></a></h2>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">chiron.models.</span></span><span class="sig-name descname"><span class="pre">PermissionGroup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>You can give different users access to different groups of subjects and different groups
of concepts using permission groups.</p>
<p>If no permission groups are set, all users have unrestricted access to the data. Once a
permission group exists, users access to subjects and concepts is restricted by default and
activated based on their permission groups.</p>
<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">name</span></span></dt>
<dd><p>A display name for this permission group</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">description</span></span></dt>
<dd><p>Optionally provide more info about this permission group</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">concept_for_allowed_subjects</span></span></dt>
<dd><p>This permission group grants access to a subject if the subject's value in this concept is
true or truthy (uses MongoDB $toBool operator)</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">allow_all_subjects_override</span></span></dt>
<dd><p>If True, this permission group grants access to all subjects.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">allowed_concepts</span></span></dt>
<dd><p>Only applies to top-level concepts (ones with no category).
Any other concepts will be ignored.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">allowed_data_categories</span></span></dt>
<dd><p>Only applies to top-level categories (ones with no category parent).
Any other categories will be ignored.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">allowed_collections</span></span></dt>
<dd><p>Allows users to create criteria sets using this Collection.
Also may have effects on what user can see in single-subject views.
(Note that if users have access to at least one concept associated with this
Collection, they will have various indirect access to collection info regardless
of this setting.)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">dataset_uses_permission_groups</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>If any permission group records are set for this dataset, returns True.
Sites that don't use permission groups will show all subjects and
concept categories to all users (except PHI filters can still be applied).</p>
</dd></dl>

</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="chiron_settings.html" class="btn btn-neutral float-left" title="Chiron Global Settings" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="data_dict_models.html" class="btn btn-neutral float-right" title="Data Dictionary" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, UC Center for Health Informatics, Cincinnati Children&#39;s Biomedical Informatics.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>