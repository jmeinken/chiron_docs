<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Custom Processors and Concept Handlers &mdash; Chiron 3.1.1 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
        <script>mermaid.initialize({startOnLoad:true});</script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Chiron API" href="../api.html" />
    <link rel="prev" title="Built-In Concept Handlers" href="built_in_concept_handlers.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> Chiron
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../system_overview.html">System Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data_dict.html">Understanding the Data Dictionary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflow.html">Site Deployment Workflow</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../configuration.html">Chiron Configuration</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="chiron_settings.html">Chiron Global Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="users.html">Users and User Permissions</a></li>
<li class="toctree-l2"><a class="reference internal" href="data_dict_models.html">Data Dictionary</a></li>
<li class="toctree-l2"><a class="reference internal" href="built_in_processors.html">Built-In Processors</a></li>
<li class="toctree-l2"><a class="reference internal" href="built_in_concept_handlers.html">Built-In Concept Handlers</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Custom Processors and Concept Handlers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#getting-started-with-custom-processors">Getting Started With Custom Processors</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tips-for-creating-custom-processors">Tips for Creating Custom Processors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#common-scenarios">Common scenarios</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#registering-custom-processors">Registering Custom Processors</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-custom-processors-in-your-data-dictionary">Using Custom Processors in Your Data Dictionary</a></li>
<li class="toctree-l3"><a class="reference internal" href="#abstract-processors">Abstract Processors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sourcecollectionprocessor-abstract">SourceCollectionProcessor (abstract)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#etlprocessor-abstract">EtlProcessor (abstract)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cohortdefprocessor-abstract">CohortDefProcessor (abstract)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cohortdefprocessorbuiltinuimixin">CohortDefProcessorBuiltInUiMixin</a></li>
<li class="toctree-l4"><a class="reference internal" href="#displayprocessor-abstract">DisplayProcessor (abstract)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#aggregationmethod-classes-for-display-processors">AggregationMethod Classes for Display Processors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#aggregationmethod-abstract-base-class">AggregationMethod (abstract base class)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#average">Average</a></li>
<li class="toctree-l4"><a class="reference internal" href="#countall">CountAll</a></li>
<li class="toctree-l4"><a class="reference internal" href="#countdistinct">CountDistinct</a></li>
<li class="toctree-l4"><a class="reference internal" href="#earliest">Earliest</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hasvalue">HasValue</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hasvaluetext">HasValueText</a></li>
<li class="toctree-l4"><a class="reference internal" href="#latest">Latest</a></li>
<li class="toctree-l4"><a class="reference internal" href="#listall">ListAll</a></li>
<li class="toctree-l4"><a class="reference internal" href="#listdistinct">ListDistinct</a></li>
<li class="toctree-l4"><a class="reference internal" href="#max">Max</a></li>
<li class="toctree-l4"><a class="reference internal" href="#maxdate">MaxDate</a></li>
<li class="toctree-l4"><a class="reference internal" href="#median">Median</a></li>
<li class="toctree-l4"><a class="reference internal" href="#min">Min</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mindate">MinDate</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mostfrequent">MostFrequent</a></li>
<li class="toctree-l4"><a class="reference internal" href="#stddev">StdDev</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">Chiron API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../version_changelog.html">Version Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Chiron</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../configuration.html">Chiron Configuration</a> &raquo;</li>
      <li>Custom Processors and Concept Handlers</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/topics/configuration/making_custom_processor.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="custom-processors-and-concept-handlers">
<h1>Custom Processors and Concept Handlers<a class="headerlink" href="#custom-processors-and-concept-handlers" title="Permalink to this headline"></a></h1>
<p>The <strong>processor classes</strong> control how data is loaded into MongoDB from data sources and how it is
displayed and queried. Chiron has a variety of :ref:<code class="docutils literal notranslate"><span class="pre">built-in-processors</span></code> that you can use
without writing any code. However, if you need customized behavior beyond what’s already provided,
you can create your own processors.</p>
<section id="getting-started-with-custom-processors">
<h2>Getting Started With Custom Processors<a class="headerlink" href="#getting-started-with-custom-processors" title="Permalink to this headline"></a></h2>
<p>Custom processors are classes that you will write in your code. These classes can go anywhere, but
we recommend creating a root-level package in your project called chiron_config and create an
additional package inside that called processors. Do not put them directly inside the chiron app,
as that will make it harder to update chiron in the future.</p>
<p>Once your custom processors are written, you need to register them with Chiron. Source collection
processors are registered with Chiron directly. The other three types of processors (ETL,
cohort def, and display) need to first be added to a concept handler. Then the concept handler
is registered with Chiron.</p>
<p>After a custom source collection processor is registered, it can be associated with any source
collection using the field <code class="docutils literal notranslate"><span class="pre">SourceCollection.processor</span></code>. Custom concept handlers can be
associated with any concept using the field <code class="docutils literal notranslate"><span class="pre">Concept.concept_handler</span></code>.</p>
</section>
<section id="tips-for-creating-custom-processors">
<h2>Tips for Creating Custom Processors<a class="headerlink" href="#tips-for-creating-custom-processors" title="Permalink to this headline"></a></h2>
<p>Your custom processor can extend any of the chiron abstract processors in <code class="docutils literal notranslate"><span class="pre">chiron.processors.abstract</span></code>. Or if your processor is similar to an existing processor, it can extend one of the built-in processors in <code class="docutils literal notranslate"><span class="pre">chiron.processors</span></code>. The abstract processors have detailed comments that are hopefully useful.</p>
<section id="common-scenarios">
<h3>Common scenarios<a class="headerlink" href="#common-scenarios" title="Permalink to this headline"></a></h3>
<p><strong>Getting data from a non-standard source such as an API</strong></p>
<ul class="simple">
<li><p>Create a custom source collection processor</p></li>
<li><p>If your custor processor returns records as dictionaries, it can be registered and used with any of the built-in concept handlers that work with dictionaries.</p></li>
</ul>
<p><strong>Generating a calculated field while loading data</strong></p>
<ul class="simple">
<li><p>Create a custom ETL processor. You will do the calculation in the <code class="docutils literal notranslate"><span class="pre">pull_record_data_from_source()</span></code> method.</p></li>
<li><p>Create a custom concept handler that extends a similar built-in concept handler. Use the <code class="docutils literal notranslate"><span class="pre">set_etl_processor()</span></code> method to add your custom ETL processor to it.</p></li>
<li><p>Register your new concept handler with the source collection processor it will be used with.</p></li>
</ul>
<p><strong>Generating a calculated field that depends on multiple data sources</strong></p>
<p>Sometimes you might want a caculated field that can only be determined by looking at data from multiple source collections. The solution here is to load the relevant source collections first, then iterate your MongoDB collection itself to do the calculation.</p>
<ul class="simple">
<li><p>You should already have your data dictionary configured to load any relevant input data you’ll need.</p></li>
<li><p>Add a new SourceCollection to your data dictionary that uses either the SourceSelf or SourceSelfSubdoc processors. Set the execution order value to run it later in the ETL process after relevant input data will have already been loaded.</p></li>
<li><p>Create a custom ETL processor. See the SourceSelf and SourceSelfSubdoc processor notes to understand the format of returned records.</p></li>
<li><p>Add your custom ETL processor to a concept handler, then register your concept handler.</p></li>
<li><p>Now you can create a new Concept and associate your custom ETL processor and your new source collection.</p></li>
</ul>
</section>
</section>
<section id="registering-custom-processors">
<h2>Registering Custom Processors<a class="headerlink" href="#registering-custom-processors" title="Permalink to this headline"></a></h2>
<p>Source collection processors are registered with Chiron directly. The other three types of processors (ETL,
cohort def, and display) need to first be added to a concept handler. Then the concept handler
is registered with Chiron.</p>
<p>Registration is done in pairs. Each entry will include a source collection processor and concept handler that are allowed to be used together. For example, it you have a custom concept handler that can be used with the built-in SourceDjangoModel processor, you would register them together like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">chiron.processors.registration2</span> <span class="kn">import</span> <span class="n">ProcessorRegistry</span>
<span class="kn">from</span> <span class="nn">chiron.processors</span> <span class="kn">import</span> <span class="n">SourceDjangoModel</span>

<span class="n">ProcessorRegistry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">SourceDjangoModel</span><span class="p">,</span> <span class="n">MyCustomHandler</span><span class="p">)</span>
</pre></div>
</div>
<p>As a shorthand, you can register multiple source collection processors and multiple concept handlers at the same time. In this case, every source collection processor will be associated with every concept handler.</p>
<p>For example, if you have a custom source collection processor that returns records as Python dictionaries, you could do this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">chiron.processors.registration2</span> <span class="kn">import</span> <span class="n">ProcessorRegistry</span>
<span class="kn">from</span> <span class="nn">chiron.processors</span> <span class="kn">import</span> <span class="n">DictCategoryHandler</span><span class="p">,</span> <span class="n">DictTextHandler</span><span class="p">,</span> <span class="n">DictDateHandler</span><span class="p">,</span> <span class="n">DictFloatHandler</span><span class="p">,</span> <span class="n">DictIntegerHandler</span>

<span class="n">ProcessorRegistry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">MySourceProcessor</span><span class="p">,</span> <span class="p">[</span>
   <span class="n">DictCategoryHandler</span><span class="p">,</span>
   <span class="n">DictTextHandler</span><span class="p">,</span>
   <span class="n">DictDateHandler</span><span class="p">,</span>
   <span class="n">DictFloatHandler</span><span class="p">,</span>
   <span class="n">DictIntegerHandler</span><span class="p">,</span>
<span class="p">])</span>
</pre></div>
</div>
<p>Tell Chiron in which modules your processors are registered. This can be done using the
CHIRON_PROCESSOR_MODULES setting. The default is to load the built-in Chiron processors. So you
will need to add the path to the package/module where your custom processors are:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">CHIRON_PROCESSOR_MODULES</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;chiron.processors&quot;</span><span class="p">,</span> <span class="s2">&quot;chiron_config.processors&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>Note: If you include a module path, that module will be checked. If you include a package path,
the <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> of the package will be checked, but child modules will not be checked.</p>
</section>
<section id="using-custom-processors-in-your-data-dictionary">
<h2>Using Custom Processors in Your Data Dictionary<a class="headerlink" href="#using-custom-processors-in-your-data-dictionary" title="Permalink to this headline"></a></h2>
<p>Once registered, your custom processors should become available in the data dictionary the
next time you run any python management command.</p>
<p>Use a custom source collection processor by setting it in <code class="docutils literal notranslate"><span class="pre">SourceCollection.processor</span></code>. Use a
custom handler by setting it in <code class="docutils literal notranslate"><span class="pre">Concept.concept_handler</span></code>.</p>
</section>
<section id="abstract-processors">
<h2>Abstract Processors<a class="headerlink" href="#abstract-processors" title="Permalink to this headline"></a></h2>
<section id="sourcecollectionprocessor-abstract">
<h3>SourceCollectionProcessor (abstract)<a class="headerlink" href="#sourcecollectionprocessor-abstract" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="chiron.processors.abstract.SourceCollectionProcessor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">chiron.processors.abstract.</span></span><span class="sig-name descname"><span class="pre">SourceCollectionProcessor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">oSourceCollection</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.SourceCollectionProcessor" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Generates an iterable of data to import into MongoDB.</p>
<p>Must be associated with either the StandardLoadMixin or the BatchLoadMixin. If both mixins
are used, the BatchLoadMixin will be used unless get_subject_match_defs() method returns
None</p>
<p>It is associated with a SourceCollection in the data dictionary using the
<code class="docutils literal notranslate"><span class="pre">SourceCollection.processor</span></code> field.</p>
<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.SourceCollectionProcessor.get_collection_id">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_collection_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.SourceCollectionProcessor.get_collection_id" title="Permalink to this definition"></a></dt>
<dd><p>Reads one record from the source data collection and returns a unique ID for the record.</p>
<p>For example, if this is a source collection of samples, could return a sample ID. If you
had sample data in multiple source collections, that sample ID could be used to merge
data for the same sample.</p>
<p>Collection IDs only apply to subcollections This method has no effect on a collection
associated with the subject (root) collection.</p>
<ul class="simple">
<li><p>If the ID matches an existing subdocument in Mongo, data will be appended to that
subdocument.</p></li>
<li><p>If no match, a new subdocument with the provided ID will be created.</p></li>
<li><p>If <strong>None</strong> is returned, a new subdocument with an auto ID will be created.</p></li>
<li><p>If <strong>False</strong> is returned, the data will not be added to Mongo at all.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the record ID</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str, integer, None, False</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.SourceCollectionProcessor.get_data_last_updated_date">
<span class="sig-name descname"><span class="pre">get_data_last_updated_date</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.SourceCollectionProcessor.get_data_last_updated_date" title="Permalink to this definition"></a></dt>
<dd><p>Returns the datetime when this source collection was last updated.
If this is a live data source, that will be now. If this is an archived data source, it
will be whatever is the date last updated.</p>
</dd></dl>

</dd></dl>

<section id="standardloadmixin">
<h4>StandardLoadMixin<a class="headerlink" href="#standardloadmixin" title="Permalink to this headline"></a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="chiron.processors.abstract.StandardLoadMixin">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">chiron.processors.abstract.</span></span><span class="sig-name descname"><span class="pre">StandardLoadMixin</span></span><a class="headerlink" href="#chiron.processors.abstract.StandardLoadMixin" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Retrieves an entire source collection as an iterable and processes/loads
to MongoDB one record at a time.</p>
<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.StandardLoadMixin.get_source_collection">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_source_collection</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.StandardLoadMixin.get_source_collection" title="Permalink to this definition"></a></dt>
<dd><p>Returns the entire source dataset as an iterable. Each entry in this iterable should
corresponds to the associated <code class="docutils literal notranslate"><span class="pre">Collection</span></code>. For example, a source data collection
associated with a “sample” collection should return an iterable of samples.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>an iterable dataset</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>various</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.StandardLoadMixin.get_subject_match_def">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_subject_match_def</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.StandardLoadMixin.get_subject_match_def" title="Permalink to this definition"></a></dt>
<dd><p>Returns rules as a Python dict about how associate a new record with the correct
subject in MongoDB.</p>
<p>SPECIAL VALUES YOU CAN RETURN:</p>
<p>If a simple ID value (string, integer):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;match_rule&quot;</span> <span class="p">:</span> <span class="p">{</span><span class="s2">&quot;_ids.id&quot;</span> <span class="p">:</span> <span class="n">value</span><span class="p">},</span>
    <span class="s2">&quot;add_ids&quot;</span> <span class="p">:</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span> <span class="p">:</span> <span class="n">value</span><span class="p">},</span>
    <span class="s2">&quot;if_no_match&quot;</span> <span class="p">:</span> <span class="s2">&quot;create&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If None, a new subject record will be created:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;match_rule&quot;</span> <span class="p">:</span> <span class="p">{},</span>
    <span class="s2">&quot;add_ids&quot;</span> <span class="p">:</span> <span class="p">{},</span>
    <span class="s2">&quot;if_no_match&quot;</span> <span class="p">:</span> <span class="s2">&quot;create&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If False, the record will be skipped:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;match_rule&quot;</span> <span class="p">:</span> <span class="p">{},</span>
    <span class="s2">&quot;add_ids&quot;</span> <span class="p">:</span> <span class="p">{},</span>
    <span class="s2">&quot;if_no_match&quot;</span> <span class="p">:</span> <span class="s2">&quot;skip&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Finally, there may be instances where a source collection record needs to be associated
with multiple subjects (ex. m2m relationships). To do this, you can return a list of match
definitions (or special values) and the ETL loaded will use all of them.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the match_def</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>python dict, str, integer, None, False, python list</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="batchloadmixin">
<h4>BatchLoadMixin<a class="headerlink" href="#batchloadmixin" title="Permalink to this headline"></a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="chiron.processors.abstract.BatchLoadMixin">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">chiron.processors.abstract.</span></span><span class="sig-name descname"><span class="pre">BatchLoadMixin</span></span><a class="headerlink" href="#chiron.processors.abstract.BatchLoadMixin" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Instead of loading one source collection record at a time, loads all the records for each
subject at once. Sometimes this is more time efficient.</p>
<p>Can’t use batches if:</p>
<ul class="simple">
<li><dl class="simple">
<dt>you can’t generate a unique list of subject IDs/match defs ahead of time.</dt><dd><p>ex. you’re reading out of a CSV file and the subject ID’s are not sorted</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>this is on the root collection</dt><dd><p>Source collections loading into the root collection already load once per subject.</p>
</dd>
</dl>
</li>
<li><p>one source record could match multiple subjects (i.e. m2m relationships)</p></li>
<li><dl class="simple">
<dt>During the ETL process, another data source has already been loaded to this subcollection</dt><dd><p>Ex. You have two data sources with different data about samples and you need to match them
up using a sample ID. The first data source could be loaded in batches, but the second
can’t.</p>
</dd>
</dl>
</li>
</ul>
<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.BatchLoadMixin.get_subject_match_defs">
<span class="sig-name descname"><span class="pre">get_subject_match_defs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.BatchLoadMixin.get_subject_match_defs" title="Permalink to this definition"></a></dt>
<dd><p>Returns all subject match definitions as a list.</p>
<dl class="field-list simple">
<dt class="field-odd">Match_rule</dt>
<dd class="field-odd"><p>A Python dict that gives the $match definition for this subject</p>
</dd>
<dt class="field-even">Add_ids</dt>
<dd class="field-even"><p>A dict of additional IDs to store in MongoDB for the subject. These will get
added inside a dict field <cite>_ids</cite>. Then they can be referenced the match_rule for
subsequent source collections.</p>
</dd>
<dt class="field-odd">If_no_match</dt>
<dd class="field-odd"><p>create/skip (default: create) - what to do if there are no existing subjects
that match the match_rule</p>
</dd>
</dl>
<p>SPECIAL VALUES YOU CAN RETURN:</p>
<p>If a simple ID value (string, integer):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;match_rule&quot;</span> <span class="p">:</span> <span class="p">{</span><span class="s2">&quot;_ids.id&quot;</span> <span class="p">:</span> <span class="n">value</span><span class="p">},</span>
    <span class="s2">&quot;add_ids&quot;</span> <span class="p">:</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span> <span class="p">:</span> <span class="n">value</span><span class="p">},</span>
    <span class="s2">&quot;if_no_match&quot;</span> <span class="p">:</span> <span class="s2">&quot;create&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If None, a new subject record will be created:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;match_rule&quot;</span> <span class="p">:</span> <span class="p">{},</span>
    <span class="s2">&quot;add_ids&quot;</span> <span class="p">:</span> <span class="p">{},</span>
    <span class="s2">&quot;if_no_match&quot;</span> <span class="p">:</span> <span class="s2">&quot;create&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If False, the record will be skipped:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;match_rule&quot;</span> <span class="p">:</span> <span class="p">{},</span>
    <span class="s2">&quot;add_ids&quot;</span> <span class="p">:</span> <span class="p">{},</span>
    <span class="s2">&quot;if_no_match&quot;</span> <span class="p">:</span> <span class="s2">&quot;skip&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the match_def</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list of: python dict, str, integer, None, False</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.BatchLoadMixin.get_source_collection_batch">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_source_collection_batch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subject_match_def</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.BatchLoadMixin.get_source_collection_batch" title="Permalink to this definition"></a></dt>
<dd><p>Returns all source collection entries associated with the subject corresponding to the
subject_match_def</p>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="etlprocessor-abstract">
<h3>EtlProcessor (abstract)<a class="headerlink" href="#etlprocessor-abstract" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="chiron.processors.abstract.EtlProcessor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">chiron.processors.abstract.</span></span><span class="sig-name descname"><span class="pre">EtlProcessor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">oConcept</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.EtlProcessor" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>An ETL Processor is for a concept. During the ETL in to MongoDB, the ETLProcessor gets
a record from the source collection and returns the value to store for this concept in
MongoDB.</p>
<p>It is associated with a Concept in the data dictionary using the <code class="docutils literal notranslate"><span class="pre">Concept.etl_processor</span></code>
field.</p>
<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.EtlProcessor.pull_record_data_from_source">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">pull_record_data_from_source</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.EtlProcessor.pull_record_data_from_source" title="Permalink to this definition"></a></dt>
<dd><p>Retrieves or calculates the value to store in MongoDB from a source collection record.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>record</strong> (<em>various</em>) – a single entry returned by <code class="docutils literal notranslate"><span class="pre">SourceCollection.get_source_collection()</span></code></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the value to store in MongoDB</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>various</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.EtlProcessor.convert_data_list_to_set">
<span class="sig-name descname"><span class="pre">convert_data_list_to_set</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.EtlProcessor.convert_data_list_to_set" title="Permalink to this definition"></a></dt>
<dd><p>UTILITY FUNCTION
Returns only unique, non-null values from provided data_list.</p>
<p>Chiron allows multiple values to be stored in a single concept entry as a list.
This is useful when you have multiple values for a concept, but don’t want
to create a whole new Collection for that one concept. Typically it’s better to store the
unique set of values rather than a repetitive
list.</p>
<p>IN: [‘Hispanic’, ‘Caucasian’, ‘Caucasian’, None, ‘Caucasian’, None]
OUT: [‘Hispanic’, ‘Caucasian’]</p>
<p>IN: [‘Caucasian’, None]
OUT: ‘Caucasian’</p>
<p>IN: [‘Caucasian’, ‘Caucasian’, ‘Caucasian’]
OUT: ‘Caucasian’</p>
<p>IN: []
OUT: None</p>
<p>IN: [None, None, None, None]
OUT: None</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.EtlProcessor.cast">
<span class="sig-name descname"><span class="pre">cast</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">val</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.EtlProcessor.cast" title="Permalink to this definition"></a></dt>
<dd><p>UTILITY FUNCTION
Useful for converting data types of input values when necessary.</p>
<p>There are two relevant object properties:
self.cast_to_type - string that specifies the desired type
self.ignore_casting_errors - If True, errors in casting will be ignored and the method
will return None</p>
</dd></dl>

</dd></dl>

</section>
<section id="cohortdefprocessor-abstract">
<span id="cohort-def-processor-abstract"></span><h3>CohortDefProcessor (abstract)<a class="headerlink" href="#cohortdefprocessor-abstract" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="chiron.processors.abstract.CohortDefProcessor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">chiron.processors.abstract.</span></span><span class="sig-name descname"><span class="pre">CohortDefProcessor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">chironuser</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">oDataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">oConcept</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.CohortDefProcessor" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Handles how a concept gets applied in queries. It is associated with a concept in the data
dictionary using the <code class="docutils literal notranslate"><span class="pre">Concept.cohort_def_processor</span></code> field.</p>
<p>IMPORTANT METHOD WORKFLOWS:</p>
<p>Getting Statistics About a Concept:</p>
<ul class="simple">
<li><p>preprocess_statistics() - generates a Python dict of statistical data about the concept</p></li>
<li><p>get_statistics() - access data from preprocess(), either directly or from a cache</p></li>
</ul>
<p>Creating a Cohort Def Entry:</p>
<ul class="simple">
<li><p>get_form_options() - data needed to generate a cohort def form</p></li>
<li><p>form_callback() - allows forms to load iteratively or be interactive using AJAX</p></li>
<li><p>form_callback_streaming() - can yield multiple responses for HttpStreaming</p></li>
<li><p>validate_form() - checks if a form submission is valid</p></li>
<li><p>generate_cohort_def_entry() - converts form submission into a dict to be added to cohort def</p></li>
</ul>
<p>Using a Cohort Def Entry:</p>
<ul class="simple">
<li><p>display_entry_as_string()</p></li>
<li><p>display_entry_as_html()</p></li>
<li><p>get_mongo_match_def()</p></li>
</ul>
<dl class="py attribute">
<dt class="sig sig-object py" id="chiron.processors.abstract.CohortDefProcessor.concept_type">
<span class="sig-name descname"><span class="pre">concept_type</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'undefined'</span></em><a class="headerlink" href="#chiron.processors.abstract.CohortDefProcessor.concept_type" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.CohortDefProcessor.preprocess_statistics">
<span class="sig-name descname"><span class="pre">preprocess_statistics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cd</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.CohortDefProcessor.preprocess_statistics" title="Permalink to this definition"></a></dt>
<dd><p>If there is data needed to render the cohort def form, it can be retrieved/calculated here.
NOTE: Don’t access directly! Instead, use <code class="docutils literal notranslate"><span class="pre">self.get_statistics()</span></code> which will
manage caching of this data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cd</strong> (<em>list of dicts</em>) – the cohort definition to use</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>key/value pairs of data</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.CohortDefProcessor.get_statistics">
<span class="sig-name descname"><span class="pre">get_statistics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cd</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.CohortDefProcessor.get_statistics" title="Permalink to this definition"></a></dt>
<dd><p>Will decide when to use cache vs when to run preprocess_statistics() method.
There shouldn’t be any need to override this method.
note: There is no cache implemented yet, so just returns preprocess_statistics()
results directly.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cd</strong> (<em>list of dicts</em>) – the cohort definition to use</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>key/value pairs of data</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.CohortDefProcessor.aggregate_stats">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">aggregate_stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stats</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.CohortDefProcessor.aggregate_stats" title="Permalink to this definition"></a></dt>
<dd><p>Convert stats to hide any non-aggregated data. This is run automatically as needed
when you use the <cite>get_statistics()</cite> method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.CohortDefProcessor.get_form_options">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_form_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">existing_cd_entry</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.CohortDefProcessor.get_form_options" title="Permalink to this definition"></a></dt>
<dd><p>Returns any data needed to render a form for creating a cohort def entry</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.CohortDefProcessor.form_callback">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">form_callback</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">get_data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.CohortDefProcessor.form_callback" title="Permalink to this definition"></a></dt>
<dd><p>Used when the form needs to collect data by AJAX in order to work properly.
Data returned by this will be passed to the form as JSON data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>get_data</strong> (<em>dict</em>) – the HTTP GET arguments from the client</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the response to be returned to the client</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.CohortDefProcessor.form_callback_streaming">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">form_callback_streaming</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">get_data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.CohortDefProcessor.form_callback_streaming" title="Permalink to this definition"></a></dt>
<dd><p>Same as form callback but can yield data multiple times to be returned using
streaming HTTP</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>get_data</strong> (<em>dict</em>) – the HTTP GET arguments from the client</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the response(s) to be returned to the client</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>iterator of dicts</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.CohortDefProcessor.validate_form">
<span class="sig-name descname"><span class="pre">validate_form</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">form_data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.CohortDefProcessor.validate_form" title="Permalink to this definition"></a></dt>
<dd><p>If provided form validates, returns True and populates self.cleaned dict with any data
needed to generate a cohort def entry. If validation fails, returns False and adds
error message strings to self.errors list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>form_data</strong> (<em>dict</em>) – the HTTP POST arguments from the client</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>whether form validated</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>boolean</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.CohortDefProcessor.get_fields_to_index">
<span class="sig-name descname"><span class="pre">get_fields_to_index</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.CohortDefProcessor.get_fields_to_index" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.CohortDefProcessor.generate_cohort_def_entry">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">generate_cohort_def_entry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">existing_cd_entry</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.CohortDefProcessor.generate_cohort_def_entry" title="Permalink to this definition"></a></dt>
<dd><p>Creates a cohort def entry dict that can be added to the cohort definition.
NOTE: This should only be run after validate_form has successfully run.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cd</strong> (<em>list of dicts</em>) – the cohort definition to add this entry to</p></li>
<li><p><strong>existing_cd_entry</strong> (<em>dict</em>) – cohort def entry if editing existing</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the cohort def entry</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.CohortDefProcessor.display_entry_as_string">
<span class="sig-name descname"><span class="pre">display_entry_as_string</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cd_entry</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.CohortDefProcessor.display_entry_as_string" title="Permalink to this definition"></a></dt>
<dd><p>Converts cd_entry dict into a human-readable string</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cd_entry</strong> (<em>dict</em>) – the cohort def entry to convert</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the human-readable string (<strong>cannot</strong> contain HTML formatting tags)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.CohortDefProcessor.display_entry_as_html_full">
<span class="sig-name descname"><span class="pre">display_entry_as_html_full</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cd_entry</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.CohortDefProcessor.display_entry_as_html_full" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.CohortDefProcessor.display_entry_as_html_abbreviated">
<span class="sig-name descname"><span class="pre">display_entry_as_html_abbreviated</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cd_entry</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.CohortDefProcessor.display_entry_as_html_abbreviated" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.CohortDefProcessor.display_entry_as_html">
<span class="sig-name descname"><span class="pre">display_entry_as_html</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cd_entry</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">abbreviation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'full'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.CohortDefProcessor.display_entry_as_html" title="Permalink to this definition"></a></dt>
<dd><p>Converts cd_entry dict into a human-readable HTML-formatted string</p>
<dl class="simple">
<dt>SECURITY: This string should be displayable as HTML without risk of XSS, etc.</dt><dd><p>If the string incorporates user-input text that hasn’t already been sanitized/
escaped, it should be dealt with here.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cd_entry</strong> (<em>dict</em>) – the cohort def entry to convert</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the human-readable string (<strong>can</strong> contain HTML formatting tags)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.CohortDefProcessor.get_mongo_match_def">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_mongo_match_def</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cd_entry</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">elem_match</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.CohortDefProcessor.get_mongo_match_def" title="Permalink to this definition"></a></dt>
<dd><p>Converts this CD entry into something that can be embedded in a Mongo ‘$match’ definition.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cd_entry</strong> (<em>dict</em>) – the cohort def entry to convert</p></li>
<li><p><strong>elem_match</strong> (<em>boolean</em>) – whether this def will be embedded inside an $elemMatch block</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the match definition</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.CohortDefProcessor.get_mongo_match_def_full">
<span class="sig-name descname"><span class="pre">get_mongo_match_def_full</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cd_entry</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">elem_match</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.CohortDefProcessor.get_mongo_match_def_full" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.CohortDefProcessor.get_concept_search_terms">
<span class="sig-name descname"><span class="pre">get_concept_search_terms</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.CohortDefProcessor.get_concept_search_terms" title="Permalink to this definition"></a></dt>
<dd><p>The concept list is searchable. By default, search includes the concept ID,
the concept name, the concept description, and all parent category names.</p>
<p>To add additional search terms, return them here as a single string. This method is called
after all the data is loaded, so it can query MongoDB to include patient data values.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.CohortDefProcessor._generate_cd_entry_template">
<span class="sig-name descname"><span class="pre">_generate_cd_entry_template</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">additional_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.CohortDefProcessor._generate_cd_entry_template" title="Permalink to this definition"></a></dt>
<dd><p>Generates a universal base that can be used by self.generate_cohort_def_entry()</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>additional_args</strong> (<em>dict</em>) – concept-specific values to include in cd_entry</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a cd_entry with concept_id and entry_id set</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="cohortdefprocessorbuiltinuimixin">
<h3>CohortDefProcessorBuiltInUiMixin<a class="headerlink" href="#cohortdefprocessorbuiltinuimixin" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="chiron.processors.abstract.CohortDefProcessorBuiltInUiMixin">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">chiron.processors.abstract.</span></span><span class="sig-name descname"><span class="pre">CohortDefProcessorBuiltInUiMixin</span></span><a class="headerlink" href="#chiron.processors.abstract.CohortDefProcessorBuiltInUiMixin" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>CohortDefProcessor functionality needed by the built-in UI. If you are only using the
API, your processors don’t need this mixin.</p>
<p>Needed properties:
- self.form_html_template
- self.form_js_template (optional)</p>
<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.CohortDefProcessorBuiltInUiMixin.generate_concept_form">
<span class="sig-name descname"><span class="pre">generate_concept_form</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">oConcept</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">statistics</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">form_options</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.CohortDefProcessorBuiltInUiMixin.generate_concept_form" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="displayprocessor-abstract">
<span id="display-processor-abstract"></span><h3>DisplayProcessor (abstract)<a class="headerlink" href="#displayprocessor-abstract" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="chiron.processors.abstract.DisplayProcessor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">chiron.processors.abstract.</span></span><span class="sig-name descname"><span class="pre">DisplayProcessor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">chironuser</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">oConcept</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.DisplayProcessor" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Manages how a concept is incorporated into output datasets. It is associated with a concept in
the data dictionary using the <code class="docutils literal notranslate"><span class="pre">Concept.display_processor</span></code> field.</p>
<p>IMPORTANT METHOD WORKFLOWS:</p>
<p>Creating a Table Def Entry:</p>
<ul class="simple">
<li><p>set_aggregation_method() - sets a list of aggregation objects that can be applied to this
concept</p></li>
<li><p>get_form_options() - data needed to display a table def entry form</p></li>
<li><p>validate_form() - checks if a form submission is valid</p></li>
<li><p>generate_table_def_entry() - converts form submission into a dict to be added to cohort def</p></li>
</ul>
<p>Applying a Table Def Entry to a Results Set:</p>
<ul class="simple">
<li><p>get_header_display_value() - the label for this column in the results output</p></li>
<li><p>get_individual_display_value() - how to convert the stored concept value into a string</p></li>
<li><p>get_display_value3() - how to convert the mongo output value into a string</p></li>
</ul>
<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.DisplayProcessor.set_sort_keygen_function">
<span class="sig-name descname"><span class="pre">set_sort_keygen_function</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.DisplayProcessor.set_sort_keygen_function" title="Permalink to this definition"></a></dt>
<dd><p>Sets the default function that will be used to generate key for sorting. The key will take
an input value and return the value to use for sorting.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.DisplayProcessor.set_display_function">
<span class="sig-name descname"><span class="pre">set_display_function</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.DisplayProcessor.set_display_function" title="Permalink to this definition"></a></dt>
<dd><p>Sets the default function that will be used to display a value in final results.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.DisplayProcessor.set_aggregation_methods">
<span class="sig-name descname"><span class="pre">set_aggregation_methods</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.DisplayProcessor.set_aggregation_methods" title="Permalink to this definition"></a></dt>
<dd><p>Sets a list of AggregationMethod objects that can be applied to this concept. This is
automatically called by the init method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.DisplayProcessor.set_td_entry">
<span class="sig-name descname"><span class="pre">set_td_entry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">td_entry</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.DisplayProcessor.set_td_entry" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.DisplayProcessor.get_default_aggregation_settings">
<span class="sig-name descname"><span class="pre">get_default_aggregation_settings</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.DisplayProcessor.get_default_aggregation_settings" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.DisplayProcessor.get_form_options">
<span class="sig-name descname"><span class="pre">get_form_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table_def</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.DisplayProcessor.get_form_options" title="Permalink to this definition"></a></dt>
<dd><p>Returns a list of options for customizing a table_def_entry</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.DisplayProcessor.validate_form">
<span class="sig-name descname"><span class="pre">validate_form</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">form_data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.DisplayProcessor.validate_form" title="Permalink to this definition"></a></dt>
<dd><p>If provided form validates, returns True and populates self.cleaned dict with any data
needed to generate a table def entry. If validation fails, returns False and adds
error message strings to self.errors list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>form_data</strong> (<em>dict</em>) – the HTTP POST arguments from the client</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>whether form validated</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>boolean</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.DisplayProcessor.generate_table_def_entry">
<span class="sig-name descname"><span class="pre">generate_table_def_entry</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.DisplayProcessor.generate_table_def_entry" title="Permalink to this definition"></a></dt>
<dd><p>Returns the table_def entry definition for this column
NOTE: This should typically be run after validate_table_form has successfully run.
Otherwise, it will just generate a default entry with no customization.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the table def entry</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.DisplayProcessor.get_sort_key_function">
<span class="sig-name descname"><span class="pre">get_sort_key_function</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column_index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reverse</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.DisplayProcessor.get_sort_key_function" title="Permalink to this definition"></a></dt>
<dd><p>Returns a function that will be used by Python for sorting. The input data type can change
depending on whether any categorization or aggregation was applied, so that needs to be
taken into account.</p>
<p>This method can be complex but the function it returns should be simple because it will
be run repeatedly.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.DisplayProcessor.get_header_display_value">
<span class="sig-name descname"><span class="pre">get_header_display_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prepend_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.DisplayProcessor.get_header_display_value" title="Permalink to this definition"></a></dt>
<dd><p>Returns a display name for the column</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.DisplayProcessor.get_display_value3">
<span class="sig-name descname"><span class="pre">get_display_value3</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_type</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.DisplayProcessor.get_display_value3" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.DisplayProcessor.map_to_value">
<span class="sig-name descname"><span class="pre">map_to_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.DisplayProcessor.map_to_value" title="Permalink to this definition"></a></dt>
<dd><p>If value from MongoDB needs to be converted to a different value (ex. date to year or
number to category), that mapping is done here.</p>
<p>This changes the actual value that gets used to build the report, which can affect
grouping. If you just want to change how the value is displayed, use get_display_value().</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.DisplayProcessor.set_map_settings">
<span class="sig-name descname"><span class="pre">set_map_settings</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.DisplayProcessor.set_map_settings" title="Permalink to this definition"></a></dt>
<dd><p>Settings for how map_to_value() will work. This can change the value type, so these
settings may also affect which sort function and display function to use.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.DisplayProcessor.calculate_aggregate_value">
<span class="sig-name descname"><span class="pre">calculate_aggregate_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.DisplayProcessor.calculate_aggregate_value" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.DisplayProcessor.get_data_type">
<span class="sig-name descname"><span class="pre">get_data_type</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.DisplayProcessor.get_data_type" title="Permalink to this definition"></a></dt>
<dd><p>Returns a human-readable string describing the data type (text, integer, etc.).
This is used to generate a data dictionary.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.DisplayProcessor.check_requires_event_dates">
<span class="sig-name descname"><span class="pre">check_requires_event_dates</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.DisplayProcessor.check_requires_event_dates" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.DisplayProcessor._get_agg_option_by_id">
<span class="sig-name descname"><span class="pre">_get_agg_option_by_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.DisplayProcessor._get_agg_option_by_id" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.abstract.DisplayProcessor._generate_td_entry_template">
<span class="sig-name descname"><span class="pre">_generate_td_entry_template</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">additional_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.abstract.DisplayProcessor._generate_td_entry_template" title="Permalink to this definition"></a></dt>
<dd><p>Generates a universal base that can be used by self.generate_cohort_def_entry()</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>additional_args</strong> (<em>dict</em>) – concept-specific values to include in cd_entry</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a cd_entry with concept_id and entry_id set</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="aggregationmethod-classes-for-display-processors">
<h2>AggregationMethod Classes for Display Processors<a class="headerlink" href="#aggregationmethod-classes-for-display-processors" title="Permalink to this headline"></a></h2>
<p>Display processors store custom lists of aggregation methods that they allow. For example,
a numeric display processor will usually include the Average aggregation method, but a text
processor would not. You can use any of the built-in aggregation methods in your custom display
processor or create your own by extending the AggregationMethod abstract class.</p>
<section id="aggregationmethod-abstract-base-class">
<h3>AggregationMethod (abstract base class)<a class="headerlink" href="#aggregationmethod-abstract-base-class" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="chiron.processors.display.aggregation._base.AggregationMethod">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">chiron.processors.display.aggregation._base.</span></span><span class="sig-name descname"><span class="pre">AggregationMethod</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.display.aggregation._base.AggregationMethod" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Has methods needed to aggregate a concept in the final output table.</p>
<p>Subclasses need to set an id, label, and group property in their __init__ method.</p>
<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.display.aggregation._base.AggregationMethod.get_inputs">
<span class="sig-name descname"><span class="pre">get_inputs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">chironuser</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">td_entry</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.display.aggregation._base.AggregationMethod.get_inputs" title="Permalink to this definition"></a></dt>
<dd><p>returns a list of dicts that define custom settings for this aggregation option</p>
<dl class="field-list simple">
<dt class="field-odd">Id</dt>
<dd class="field-odd"><p>(str) a unique id to identify this input</p>
</dd>
<dt class="field-even">Label</dt>
<dd class="field-even"><p>(str) the human-readable label for this input</p>
</dd>
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>(str) “select” for HTML select and “ajax_select” for select tool that must lookup
options</p>
</dd>
<dt class="field-even">Options</dt>
<dd class="field-even"><p>(list of tuples) for type=”select”; id/value pairs for options</p>
</dd>
<dt class="field-odd">Options_callback</dt>
<dd class="field-odd"><p>(str) for type=”ajax_select”; the url where options can be looked up</p>
</dd>
<dt class="field-even">Selected</dt>
<dd class="field-even"><p>(str) value that should be selected by default</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.display.aggregation._base.AggregationMethod.set_custom_settings">
<span class="sig-name descname"><span class="pre">set_custom_settings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.display.aggregation._base.AggregationMethod.set_custom_settings" title="Permalink to this definition"></a></dt>
<dd><p>takes an input_data dict from post request and returns a dict of values that will be saved
to the table def entry</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.display.aggregation._base.AggregationMethod.check_requires_event_dates">
<span class="sig-name descname"><span class="pre">check_requires_event_dates</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">td_entry</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.display.aggregation._base.AggregationMethod.check_requires_event_dates" title="Permalink to this definition"></a></dt>
<dd><p>Does this aggregation option require the event date(s) from the parent collection?</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.display.aggregation._base.AggregationMethod.get_header_display_value">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_header_display_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">oConcept</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">td_entry</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.display.aggregation._base.AggregationMethod.get_header_display_value" title="Permalink to this definition"></a></dt>
<dd><p>Returns a header label for this aggregated column.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>oConcept</strong> (<em>model object</em>) – the concept being aggregated</p></li>
<li><p><strong>td_entry</strong> (<em>dict</em>) – the column definition</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>header label</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.display.aggregation._base.AggregationMethod.get_display_value3">
<span class="sig-name descname"><span class="pre">get_display_value3</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display_processor_display_func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_type</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.display.aggregation._base.AggregationMethod.get_display_value3" title="Permalink to this definition"></a></dt>
<dd><p>convert the calculated aggregate value to the final display value</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.display.aggregation._base.AggregationMethod._date_to_string">
<span class="sig-name descname"><span class="pre">_date_to_string</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.display.aggregation._base.AggregationMethod._date_to_string" title="Permalink to this definition"></a></dt>
<dd><p>Utility function that converts a date to a string.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.display.aggregation._base.AggregationMethod.get_sort_key">
<span class="sig-name descname"><span class="pre">get_sort_key</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.display.aggregation._base.AggregationMethod.get_sort_key" title="Permalink to this definition"></a></dt>
<dd><p>Returns the value from the report that will be used for sorting. By default, this is the
column value itself.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.display.aggregation._base.AggregationMethod.get_sort_key_date">
<span class="sig-name descname"><span class="pre">get_sort_key_date</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.display.aggregation._base.AggregationMethod.get_sort_key_date" title="Permalink to this definition"></a></dt>
<dd><p>This can be used to sort date values</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.display.aggregation._base.AggregationMethod.get_sort_key_function">
<span class="sig-name descname"><span class="pre">get_sort_key_function</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">display_processor_sort_value_func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column_index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reverse</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aggregation_settings</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.display.aggregation._base.AggregationMethod.get_sort_key_function" title="Permalink to this definition"></a></dt>
<dd><p>Returns the function that will be used for sorting the report. The column_index gives
which report column this field is in.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>display_processor_sort_value_func</strong> (<em>python function</em>) – The function that would normally be used to
sort the non-aggregated value.</p></li>
<li><p><strong>column_index</strong> (<em>integer</em>) – The index position of this column in the report</p></li>
<li><p><strong>reverse</strong> (<em>boolean</em>) – In some instances, sort key might work differently if reverse sorting</p></li>
<li><p><strong>aggregation_settings</strong> (<em>python dict</em>) – Any settings included in the td_entry</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.display.aggregation._base.AggregationMethod._get_value_list_no_nulls">
<span class="sig-name descname"><span class="pre">_get_value_list_no_nulls</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">concept_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.display.aggregation._base.AggregationMethod._get_value_list_no_nulls" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.display.aggregation._base.AggregationMethod._get_value_list">
<span class="sig-name descname"><span class="pre">_get_value_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">concept_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.display.aggregation._base.AggregationMethod._get_value_list" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.display.aggregation._base.AggregationMethod._remove_records_with_null_values">
<span class="sig-name descname"><span class="pre">_remove_records_with_null_values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">concept_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.display.aggregation._base.AggregationMethod._remove_records_with_null_values" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.display.aggregation._base.AggregationMethod._get_event_list">
<span class="sig-name descname"><span class="pre">_get_event_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">concept_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_date_field</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.display.aggregation._base.AggregationMethod._get_event_list" title="Permalink to this definition"></a></dt>
<dd><p>The query process can end up duplicating collection records. This uses the _id to
remove duplicate records.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.display.aggregation._base.AggregationMethod._get_event_list_no_nulls">
<span class="sig-name descname"><span class="pre">_get_event_list_no_nulls</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">concept_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_date_field</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.display.aggregation._base.AggregationMethod._get_event_list_no_nulls" title="Permalink to this definition"></a></dt>
<dd><p>The query process can end up duplicating collection records. This uses the _id to
remove duplicate records.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="chiron.processors.display.aggregation._base.AggregationMethod._get_ordinal_string">
<span class="sig-name descname"><span class="pre">_get_ordinal_string</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.display.aggregation._base.AggregationMethod._get_ordinal_string" title="Permalink to this definition"></a></dt>
<dd><p>Convert an integer into its ordinal representation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make_ordinal</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>   <span class="o">=&gt;</span> <span class="s1">&#39;0th&#39;</span>
<span class="n">make_ordinal</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>   <span class="o">=&gt;</span> <span class="s1">&#39;3rd&#39;</span>
<span class="n">make_ordinal</span><span class="p">(</span><span class="mi">122</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="s1">&#39;122nd&#39;</span>
<span class="n">make_ordinal</span><span class="p">(</span><span class="mi">213</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="s1">&#39;213th&#39;</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</section>
<section id="average">
<h3>Average<a class="headerlink" href="#average" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="chiron.processors.display.aggregation.Average">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">chiron.processors.display.aggregation.</span></span><span class="sig-name descname"><span class="pre">Average</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'average'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'average'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'aggregate'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.display.aggregation.Average" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#chiron.processors.display.aggregation._base.AggregationMethod" title="chiron.processors.display.aggregation._base.AggregationMethod"><code class="xref py py-class docutils literal notranslate"><span class="pre">chiron.processors.display.aggregation._base.AggregationMethod</span></code></a></p>
<p>Calculate average value of a set of numbers.</p>
</dd></dl>

</section>
<section id="countall">
<h3>CountAll<a class="headerlink" href="#countall" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="chiron.processors.display.aggregation.CountAll">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">chiron.processors.display.aggregation.</span></span><span class="sig-name descname"><span class="pre">CountAll</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'count_all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'count</span> <span class="pre">all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'aggregate'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.display.aggregation.CountAll" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#chiron.processors.display.aggregation._base.AggregationMethod" title="chiron.processors.display.aggregation._base.AggregationMethod"><code class="xref py py-class docutils literal notranslate"><span class="pre">chiron.processors.display.aggregation._base.AggregationMethod</span></code></a></p>
<p>Count all non-null values, including duplicates.</p>
</dd></dl>

</section>
<section id="countdistinct">
<h3>CountDistinct<a class="headerlink" href="#countdistinct" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="chiron.processors.display.aggregation.CountDistinct">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">chiron.processors.display.aggregation.</span></span><span class="sig-name descname"><span class="pre">CountDistinct</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'count_distinct'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'count</span> <span class="pre">distinct'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'aggregate'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.display.aggregation.CountDistinct" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#chiron.processors.display.aggregation._base.AggregationMethod" title="chiron.processors.display.aggregation._base.AggregationMethod"><code class="xref py py-class docutils literal notranslate"><span class="pre">chiron.processors.display.aggregation._base.AggregationMethod</span></code></a></p>
<p>Count distinct non-null values</p>
</dd></dl>

</section>
<section id="earliest">
<h3>Earliest<a class="headerlink" href="#earliest" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="chiron.processors.display.aggregation.Earliest">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">chiron.processors.display.aggregation.</span></span><span class="sig-name descname"><span class="pre">Earliest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'earliest'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'earliest</span> <span class="pre">value'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'aggregate'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.display.aggregation.Earliest" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#chiron.processors.display.aggregation._base.AggregationMethod" title="chiron.processors.display.aggregation._base.AggregationMethod"><code class="xref py py-class docutils literal notranslate"><span class="pre">chiron.processors.display.aggregation._base.AggregationMethod</span></code></a></p>
<p>Get the earliest value based on the event_date_field for the collection.</p>
</dd></dl>

</section>
<section id="hasvalue">
<h3>HasValue<a class="headerlink" href="#hasvalue" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="chiron.processors.display.aggregation.HasValue">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">chiron.processors.display.aggregation.</span></span><span class="sig-name descname"><span class="pre">HasValue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'has_value'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'has</span> <span class="pre">value'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'aggregate'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.display.aggregation.HasValue" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#chiron.processors.display.aggregation._base.AggregationMethod" title="chiron.processors.display.aggregation._base.AggregationMethod"><code class="xref py py-class docutils literal notranslate"><span class="pre">chiron.processors.display.aggregation._base.AggregationMethod</span></code></a></p>
<p>Check for the existence of a value in the list. This can return a boolean
result, a count of the number of matches, the date of the first or last
match (based on the event_date_field for the collection), or all dates
where this value occurred (again based on the event_date_field).</p>
</dd></dl>

</section>
<section id="hasvaluetext">
<h3>HasValueText<a class="headerlink" href="#hasvaluetext" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="chiron.processors.display.aggregation.HasValueText">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">chiron.processors.display.aggregation.</span></span><span class="sig-name descname"><span class="pre">HasValueText</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'has_value_text'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'has</span> <span class="pre">value'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'aggregate'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.display.aggregation.HasValueText" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#chiron.processors.display.aggregation._base.AggregationMethod" title="chiron.processors.display.aggregation._base.AggregationMethod"><code class="xref py py-class docutils literal notranslate"><span class="pre">chiron.processors.display.aggregation._base.AggregationMethod</span></code></a></p>
<p>Check for the existence of a value in the list. This can return a boolean
result, a count of the number of matches, the date of the first or last
match (based on the event_date_field for the collection), or all dates
where this value occurred (again based on the event_date_field).</p>
</dd></dl>

</section>
<section id="latest">
<h3>Latest<a class="headerlink" href="#latest" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="chiron.processors.display.aggregation.Latest">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">chiron.processors.display.aggregation.</span></span><span class="sig-name descname"><span class="pre">Latest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'latest'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'latest</span> <span class="pre">value'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'aggregate'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.display.aggregation.Latest" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#chiron.processors.display.aggregation._base.AggregationMethod" title="chiron.processors.display.aggregation._base.AggregationMethod"><code class="xref py py-class docutils literal notranslate"><span class="pre">chiron.processors.display.aggregation._base.AggregationMethod</span></code></a></p>
<p>Get the latest value (most recent) based on the event_date_field for the collection.</p>
</dd></dl>

</section>
<section id="listall">
<h3>ListAll<a class="headerlink" href="#listall" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="chiron.processors.display.aggregation.ListAll">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">chiron.processors.display.aggregation.</span></span><span class="sig-name descname"><span class="pre">ListAll</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'list_all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'list</span> <span class="pre">all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'list'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.display.aggregation.ListAll" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#chiron.processors.display.aggregation._base.AggregationMethod" title="chiron.processors.display.aggregation._base.AggregationMethod"><code class="xref py py-class docutils literal notranslate"><span class="pre">chiron.processors.display.aggregation._base.AggregationMethod</span></code></a></p>
<p>List all values (including repeats) in same cell as semicolon-separated string.</p>
</dd></dl>

</section>
<section id="listdistinct">
<h3>ListDistinct<a class="headerlink" href="#listdistinct" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="chiron.processors.display.aggregation.ListDistinct">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">chiron.processors.display.aggregation.</span></span><span class="sig-name descname"><span class="pre">ListDistinct</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'list_distinct'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'list</span> <span class="pre">distinct'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'list'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.display.aggregation.ListDistinct" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#chiron.processors.display.aggregation._base.AggregationMethod" title="chiron.processors.display.aggregation._base.AggregationMethod"><code class="xref py py-class docutils literal notranslate"><span class="pre">chiron.processors.display.aggregation._base.AggregationMethod</span></code></a></p>
<p>List distinct values in same cell as semicolon-separated string.</p>
</dd></dl>

</section>
<section id="max">
<h3>Max<a class="headerlink" href="#max" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="chiron.processors.display.aggregation.Max">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">chiron.processors.display.aggregation.</span></span><span class="sig-name descname"><span class="pre">Max</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'max'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'max</span> <span class="pre">value'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'aggregate'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.display.aggregation.Max" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#chiron.processors.display.aggregation._base.AggregationMethod" title="chiron.processors.display.aggregation._base.AggregationMethod"><code class="xref py py-class docutils literal notranslate"><span class="pre">chiron.processors.display.aggregation._base.AggregationMethod</span></code></a></p>
<p>Aggregate by getting maximim value only</p>
</dd></dl>

</section>
<section id="maxdate">
<h3>MaxDate<a class="headerlink" href="#maxdate" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="chiron.processors.display.aggregation.MaxDate">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">chiron.processors.display.aggregation.</span></span><span class="sig-name descname"><span class="pre">MaxDate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'max_date'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'latest'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'aggregate'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.display.aggregation.MaxDate" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#chiron.processors.display.aggregation._base.AggregationMethod" title="chiron.processors.display.aggregation._base.AggregationMethod"><code class="xref py py-class docutils literal notranslate"><span class="pre">chiron.processors.display.aggregation._base.AggregationMethod</span></code></a></p>
<p>Aggregate a date by getting maximum value only (i.e. the latest date)</p>
</dd></dl>

</section>
<section id="median">
<h3>Median<a class="headerlink" href="#median" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="chiron.processors.display.aggregation.Median">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">chiron.processors.display.aggregation.</span></span><span class="sig-name descname"><span class="pre">Median</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'median'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'median'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'aggregate'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.display.aggregation.Median" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#chiron.processors.display.aggregation._base.AggregationMethod" title="chiron.processors.display.aggregation._base.AggregationMethod"><code class="xref py py-class docutils literal notranslate"><span class="pre">chiron.processors.display.aggregation._base.AggregationMethod</span></code></a></p>
<p>Calculate the median value of a group of numbers.</p>
</dd></dl>

</section>
<section id="min">
<h3>Min<a class="headerlink" href="#min" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="chiron.processors.display.aggregation.Min">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">chiron.processors.display.aggregation.</span></span><span class="sig-name descname"><span class="pre">Min</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'min'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'min</span> <span class="pre">value'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'aggregate'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.display.aggregation.Min" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#chiron.processors.display.aggregation._base.AggregationMethod" title="chiron.processors.display.aggregation._base.AggregationMethod"><code class="xref py py-class docutils literal notranslate"><span class="pre">chiron.processors.display.aggregation._base.AggregationMethod</span></code></a></p>
<p>Aggregate by getting miniumum value only</p>
</dd></dl>

</section>
<section id="mindate">
<h3>MinDate<a class="headerlink" href="#mindate" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="chiron.processors.display.aggregation.MinDate">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">chiron.processors.display.aggregation.</span></span><span class="sig-name descname"><span class="pre">MinDate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'min_date'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'earliest'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'aggregate'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.display.aggregation.MinDate" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#chiron.processors.display.aggregation._base.AggregationMethod" title="chiron.processors.display.aggregation._base.AggregationMethod"><code class="xref py py-class docutils literal notranslate"><span class="pre">chiron.processors.display.aggregation._base.AggregationMethod</span></code></a></p>
<p>Aggregate a date by getting minimum value only (i.e. the earliest date)</p>
</dd></dl>

</section>
<section id="mostfrequent">
<h3>MostFrequent<a class="headerlink" href="#mostfrequent" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="chiron.processors.display.aggregation.MostFrequent">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">chiron.processors.display.aggregation.</span></span><span class="sig-name descname"><span class="pre">MostFrequent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'most_frequent'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'most</span> <span class="pre">frequent</span> <span class="pre">value'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'aggregate'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.display.aggregation.MostFrequent" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#chiron.processors.display.aggregation._base.AggregationMethod" title="chiron.processors.display.aggregation._base.AggregationMethod"><code class="xref py py-class docutils literal notranslate"><span class="pre">chiron.processors.display.aggregation._base.AggregationMethod</span></code></a></p>
<p>Can get for the most frequent value and how many times it occurred</p>
</dd></dl>

</section>
<section id="stddev">
<h3>StdDev<a class="headerlink" href="#stddev" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="chiron.processors.display.aggregation.StdDev">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">chiron.processors.display.aggregation.</span></span><span class="sig-name descname"><span class="pre">StdDev</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'std_dev'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'standard</span> <span class="pre">deviation'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'aggregate'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#chiron.processors.display.aggregation.StdDev" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#chiron.processors.display.aggregation._base.AggregationMethod" title="chiron.processors.display.aggregation._base.AggregationMethod"><code class="xref py py-class docutils literal notranslate"><span class="pre">chiron.processors.display.aggregation._base.AggregationMethod</span></code></a></p>
<p>Calculate the standard deviation of a set of numbers</p>
</dd></dl>

</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="built_in_concept_handlers.html" class="btn btn-neutral float-left" title="Built-In Concept Handlers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../api.html" class="btn btn-neutral float-right" title="Chiron API" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, UC Center for Health Informatics, Cincinnati Children&#39;s Biomedical Informatics.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>